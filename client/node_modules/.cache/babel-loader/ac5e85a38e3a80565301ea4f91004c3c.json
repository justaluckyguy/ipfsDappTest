{"ast":null,"code":"var Stream = require('stream');\nmodule.exports = duplex;\nmodule.exports.source = function (source) {\n  return duplex(null, source);\n};\nmodule.exports.sink = function (sink) {\n  return duplex(sink, null);\n};\nvar next = 'undefined' === typeof setImmediate ? process.nextTick : setImmediate;\nfunction duplex(reader, read) {\n  if (reader && 'object' === typeof reader) {\n    read = reader.source;\n    reader = reader.sink;\n  }\n  var cbs = [],\n    input = [],\n    ended,\n    needDrain;\n  var s = new Stream();\n  s.writable = s.readable = true;\n  s.write = function (data) {\n    if (cbs.length) cbs.shift()(null, data);else input.push(data);\n    if (!cbs.length) {\n      needDrain = true;\n    }\n    return !!cbs.length;\n  };\n  s.end = function () {\n    if (read) {\n      if (input.length) drain();else read(ended = true, cbs.length ? cbs.shift() : function () {});\n    } else if (cbs.length) {\n      cbs.shift()(true);\n    }\n  };\n  s.source = function (end, cb) {\n    if (input.length) {\n      cb(null, input.shift());\n      if (!input.length) s.emit('drain');\n    } else {\n      if (ended = ended || end) cb(ended);else cbs.push(cb);\n      if (needDrain) {\n        needDrain = false;\n        s.emit('drain');\n      }\n    }\n  };\n  var n;\n  if (reader) n = reader(s.source);\n  if (n && !read) read = n;\n  var output = [],\n    _cbs = [];\n  var _ended = false,\n    waiting = false,\n    busy = false;\n  s.sink = function (_read) {\n    read = _read;\n    next(drain);\n  };\n  if (read) {\n    s.sink(read);\n    var pipe = s.pipe.bind(s);\n    s.pipe = function (dest, opts) {\n      var res = pipe(dest, opts);\n      if (s.paused) s.resume();\n      return res;\n    };\n  }\n  function drain() {\n    waiting = false;\n    if (!read || busy) return;\n    while (output.length && !s.paused) {\n      s.emit('data', output.shift());\n    }\n    if (s.paused) return;\n    if (_ended) return s.emit('end');\n    busy = true;\n    read(null, function next(end, data) {\n      busy = false;\n      if (s.paused) {\n        if (end === true) _ended = end;else if (end) s.emit('error', end);else output.push(data);\n        waiting = true;\n      } else {\n        if (end && (ended = end) !== true) s.emit('error', end);else if (ended = ended || end) s.emit('end');else {\n          s.emit('data', data);\n          busy = true;\n          read(null, next);\n        }\n      }\n    });\n  }\n  s.pause = function () {\n    s.paused = true;\n    return s;\n  };\n  s.resume = function () {\n    s.paused = false;\n    drain();\n    return s;\n  };\n  s.destroy = function () {\n    if (!ended && read) read(ended = true, function () {});\n    ended = true;\n    if (cbs.length) cbs.shift()(true);\n    s.emit('close');\n  };\n  return s;\n}","map":{"version":3,"names":["Stream","require","module","exports","duplex","source","sink","next","setImmediate","process","nextTick","reader","read","cbs","input","ended","needDrain","s","writable","readable","write","data","length","shift","push","end","drain","cb","emit","n","output","_cbs","_ended","waiting","busy","_read","pipe","bind","dest","opts","res","paused","resume","pause","destroy"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/pull-stream-to-stream/index.js"],"sourcesContent":["\nvar Stream = require('stream')\n\nmodule.exports = duplex\n\n\nmodule.exports.source = function (source) {\n  return duplex(null, source)\n}\n\nmodule.exports.sink = function (sink) {\n  return duplex(sink, null)\n}\n\nvar next = (\n  'undefined' === typeof setImmediate\n  ? process.nextTick\n  : setImmediate\n)\n\nfunction duplex (reader, read) {\n  if(reader && 'object' === typeof reader) {\n    read = reader.source\n    reader = reader.sink\n  }\n\n  var cbs = [], input = [], ended, needDrain\n  var s = new Stream()\n  s.writable = s.readable = true\n  s.write = function (data) {\n    if(cbs.length)\n      cbs.shift()(null, data)\n    else\n      input.push(data)\n\n    if (!cbs.length) {\n      needDrain = true\n    }\n    return !!cbs.length\n  }\n\n  s.end = function () {\n    if(read) {\n      if (input.length)\n        drain()\n      else\n        read(ended = true, cbs.length ? cbs.shift() : function () {})\n    } else if(cbs.length) {\n      cbs.shift()(true)\n    }\n  }\n\n  s.source = function (end, cb) {\n    if(input.length) {\n      cb(null, input.shift())\n      if(!input.length)\n        s.emit('drain')\n    }\n    else {\n      if(ended = ended || end)\n        cb(ended)\n      else\n        cbs.push(cb)\n\n      if (needDrain) {\n        needDrain = false\n        s.emit('drain')\n      }\n    }\n  }\n\n  var n\n  if(reader) n = reader(s.source)\n  if(n && !read) read = n\n\n  var output = [], _cbs = []\n  var _ended = false, waiting = false, busy = false\n\n  s.sink = function (_read) {\n    read = _read\n    next(drain)\n  }\n\n  if(read) {\n    s.sink(read)\n\n    var pipe = s.pipe.bind(s)\n    s.pipe = function (dest, opts) {\n      var res = pipe(dest, opts)\n\n      if(s.paused) s.resume()\n\n      return res\n    }\n  }\n\n  function drain () {\n    waiting = false\n    if(!read || busy) return\n    while(output.length && !s.paused) {\n      s.emit('data', output.shift())\n    }\n    if(s.paused) return\n    if(_ended)\n      return s.emit('end')\n\n    busy = true\n    read(null, function next (end, data) {\n      busy = false\n      if(s.paused) {\n        if(end === true) _ended = end\n        else if(end) s.emit('error', end)\n        else output.push(data)\n        waiting = true\n      } else {\n        if(end && (ended = end) !== true)\n          s.emit('error', end)\n        else if(ended = ended || end) s.emit('end')\n        else {\n          s.emit('data', data)\n          busy = true\n          read(null, next)\n        }\n      }\n    })\n  }\n\n  s.pause = function () {\n    s.paused = true\n    return s\n  }\n\n  s.resume = function () {\n    s.paused = false\n    drain()\n    return s\n  }\n\n  s.destroy = function () {\n    if(!ended && read)\n      read(ended = true, function () {})\n    ended = true\n    if(cbs.length)\n      cbs.shift()(true)\n\n    s.emit('close')\n  }\n\n  return s\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}