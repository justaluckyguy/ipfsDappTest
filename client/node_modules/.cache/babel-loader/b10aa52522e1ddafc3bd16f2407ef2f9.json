{"ast":null,"code":"'use strict';\n\nconst multihashing = require('multihashing-async');\nmodule.exports = (keysProtobuf, randomBytes, crypto) => {\n  crypto = crypto || require('./crypto')(randomBytes);\n  class Secp256k1PublicKey {\n    constructor(key) {\n      crypto.validatePublicKey(key);\n      this._key = key;\n    }\n    verify(data, sig, callback) {\n      ensure(callback);\n      crypto.hashAndVerify(this._key, sig, data, callback);\n    }\n    marshal() {\n      return crypto.compressPublicKey(this._key);\n    }\n    get bytes() {\n      return keysProtobuf.PublicKey.encode({\n        Type: keysProtobuf.KeyType.Secp256k1,\n        Data: this.marshal()\n      });\n    }\n    equals(key) {\n      return this.bytes.equals(key.bytes);\n    }\n    hash(callback) {\n      ensure(callback);\n      multihashing(this.bytes, 'sha2-256', callback);\n    }\n  }\n  class Secp256k1PrivateKey {\n    constructor(key, publicKey) {\n      this._key = key;\n      this._publicKey = publicKey || crypto.computePublicKey(key);\n      crypto.validatePrivateKey(this._key);\n      crypto.validatePublicKey(this._publicKey);\n    }\n    sign(message, callback) {\n      ensure(callback);\n      crypto.hashAndSign(this._key, message, callback);\n    }\n    get public() {\n      return new Secp256k1PublicKey(this._publicKey);\n    }\n    marshal() {\n      return this._key;\n    }\n    get bytes() {\n      return keysProtobuf.PrivateKey.encode({\n        Type: keysProtobuf.KeyType.Secp256k1,\n        Data: this.marshal()\n      });\n    }\n    equals(key) {\n      return this.bytes.equals(key.bytes);\n    }\n    hash(callback) {\n      ensure(callback);\n      multihashing(this.bytes, 'sha2-256', callback);\n    }\n  }\n  function unmarshalSecp256k1PrivateKey(bytes, callback) {\n    callback(null, new Secp256k1PrivateKey(bytes), null);\n  }\n  function unmarshalSecp256k1PublicKey(bytes) {\n    return new Secp256k1PublicKey(bytes);\n  }\n  function generateKeyPair(_bits, callback) {\n    if (callback === undefined && typeof _bits === 'function') {\n      callback = _bits;\n    }\n    ensure(callback);\n    crypto.generateKey((err, privateKeyBytes) => {\n      if (err) {\n        return callback(err);\n      }\n      let privkey;\n      try {\n        privkey = new Secp256k1PrivateKey(privateKeyBytes);\n      } catch (err) {\n        return callback(err);\n      }\n      callback(null, privkey);\n    });\n  }\n  function ensure(callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('callback is required');\n    }\n  }\n  return {\n    Secp256k1PublicKey,\n    Secp256k1PrivateKey,\n    unmarshalSecp256k1PrivateKey,\n    unmarshalSecp256k1PublicKey,\n    generateKeyPair\n  };\n};","map":{"version":3,"names":["multihashing","require","module","exports","keysProtobuf","randomBytes","crypto","Secp256k1PublicKey","constructor","key","validatePublicKey","_key","verify","data","sig","callback","ensure","hashAndVerify","marshal","compressPublicKey","bytes","PublicKey","encode","Type","KeyType","Secp256k1","Data","equals","hash","Secp256k1PrivateKey","publicKey","_publicKey","computePublicKey","validatePrivateKey","sign","message","hashAndSign","public","PrivateKey","unmarshalSecp256k1PrivateKey","unmarshalSecp256k1PublicKey","generateKeyPair","_bits","undefined","generateKey","err","privateKeyBytes","privkey","Error"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/libp2p-crypto-secp256k1/src/index.js"],"sourcesContent":["'use strict'\n\nconst multihashing = require('multihashing-async')\n\nmodule.exports = (keysProtobuf, randomBytes, crypto) => {\n  crypto = crypto || require('./crypto')(randomBytes)\n\n  class Secp256k1PublicKey {\n    constructor (key) {\n      crypto.validatePublicKey(key)\n      this._key = key\n    }\n\n    verify (data, sig, callback) {\n      ensure(callback)\n      crypto.hashAndVerify(this._key, sig, data, callback)\n    }\n\n    marshal () {\n      return crypto.compressPublicKey(this._key)\n    }\n\n    get bytes () {\n      return keysProtobuf.PublicKey.encode({\n        Type: keysProtobuf.KeyType.Secp256k1,\n        Data: this.marshal()\n      })\n    }\n\n    equals (key) {\n      return this.bytes.equals(key.bytes)\n    }\n\n    hash (callback) {\n      ensure(callback)\n      multihashing(this.bytes, 'sha2-256', callback)\n    }\n  }\n\n  class Secp256k1PrivateKey {\n    constructor (key, publicKey) {\n      this._key = key\n      this._publicKey = publicKey || crypto.computePublicKey(key)\n      crypto.validatePrivateKey(this._key)\n      crypto.validatePublicKey(this._publicKey)\n    }\n\n    sign (message, callback) {\n      ensure(callback)\n      crypto.hashAndSign(this._key, message, callback)\n    }\n\n    get public () {\n      return new Secp256k1PublicKey(this._publicKey)\n    }\n\n    marshal () {\n      return this._key\n    }\n\n    get bytes () {\n      return keysProtobuf.PrivateKey.encode({\n        Type: keysProtobuf.KeyType.Secp256k1,\n        Data: this.marshal()\n      })\n    }\n\n    equals (key) {\n      return this.bytes.equals(key.bytes)\n    }\n\n    hash (callback) {\n      ensure(callback)\n      multihashing(this.bytes, 'sha2-256', callback)\n    }\n  }\n\n  function unmarshalSecp256k1PrivateKey (bytes, callback) {\n    callback(null, new Secp256k1PrivateKey(bytes), null)\n  }\n\n  function unmarshalSecp256k1PublicKey (bytes) {\n    return new Secp256k1PublicKey(bytes)\n  }\n\n  function generateKeyPair (_bits, callback) {\n    if (callback === undefined && typeof _bits === 'function') {\n      callback = _bits\n    }\n\n    ensure(callback)\n\n    crypto.generateKey((err, privateKeyBytes) => {\n      if (err) { return callback(err) }\n\n      let privkey\n      try {\n        privkey = new Secp256k1PrivateKey(privateKeyBytes)\n      } catch (err) { return callback(err) }\n\n      callback(null, privkey)\n    })\n  }\n\n  function ensure (callback) {\n    if (typeof callback !== 'function') {\n      throw new Error('callback is required')\n    }\n  }\n\n  return {\n    Secp256k1PublicKey,\n    Secp256k1PrivateKey,\n    unmarshalSecp256k1PrivateKey,\n    unmarshalSecp256k1PublicKey,\n    generateKeyPair\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}