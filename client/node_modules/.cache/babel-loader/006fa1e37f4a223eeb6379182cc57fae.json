{"ast":null,"code":"/**\n * Implementation of the [multibase](https://github.com/multiformats/multibase) specification.\n * @module Multibase\n */\n'use strict';\n\nconst constants = require('./constants');\nexports = module.exports = multibase;\nexports.encode = encode;\nexports.decode = decode;\nexports.isEncoded = isEncoded;\nexports.names = Object.freeze(Object.keys(constants.names));\nexports.codes = Object.freeze(Object.keys(constants.codes));\nconst errNotSupported = new Error('Unsupported encoding');\n\n/**\n * Create a new buffer with the multibase varint+code.\n *\n * @param {string|number} nameOrCode - The multibase name or code number.\n * @param {Buffer} buf - The data to be prefixed with multibase.\n * @memberof Multibase\n * @returns {Buffer}\n */\nfunction multibase(nameOrCode, buf) {\n  if (!buf) {\n    throw new Error('requires an encoded buffer');\n  }\n  const base = getBase(nameOrCode);\n  const codeBuf = Buffer.from(base.code);\n  const name = base.name;\n  validEncode(name, buf);\n  return Buffer.concat([codeBuf, buf]);\n}\n\n/**\n * Encode data with the specified base and add the multibase prefix.\n *\n * @param {string|number} nameOrCode - The multibase name or code number.\n * @param {Buffer} buf - The data to be encoded.\n * @returns {Buffer}\n * @memberof Multibase\n */\nfunction encode(nameOrCode, buf) {\n  const base = getBase(nameOrCode);\n  const name = base.name;\n  return multibase(name, Buffer.from(base.encode(buf)));\n}\n\n/**\n *\n * Takes a buffer or string encoded with multibase header\n * decodes it and returns an object with the decoded buffer\n * and the encoded type { base: <name>, data: <buffer> }\n *\n * from @theobat : This is not what the multibase.spec.js test is waiting for,\n * hence the return decodeObject.data\n *\n * @param {Buffer|string} bufOrString\n * @returns {Object} result\n * @returns {string} result.base\n * @returns {Buffer} result.data\n * @memberof Multibase\n *\n */\nfunction decode(bufOrString) {\n  if (Buffer.isBuffer(bufOrString)) {\n    bufOrString = bufOrString.toString();\n  }\n  const code = bufOrString.substring(0, 1);\n  bufOrString = bufOrString.substring(1, bufOrString.length);\n  if (typeof bufOrString === 'string') {\n    bufOrString = Buffer.from(bufOrString);\n  }\n  const base = getBase(code);\n  const decodeObject = {\n    base: base.name,\n    data: Buffer.from(base.decode(bufOrString.toString()))\n  };\n  return decodeObject.data;\n}\n\n/**\n * Is the given data multibase encoded?\n *\n * @param {Buffer|string} bufOrString\n * @returns {boolean}\n * @memberof Multibase\n */\nfunction isEncoded(bufOrString) {\n  if (Buffer.isBuffer(bufOrString)) {\n    bufOrString = bufOrString.toString();\n  }\n  const code = bufOrString.substring(0, 1);\n  try {\n    const base = getBase(code);\n    return base.name;\n  } catch (err) {\n    return false;\n  }\n}\n\n/**\n * @param {string} name\n * @param {Buffer} buf\n * @private\n * @returns {undefined}\n */\nfunction validEncode(name, buf) {\n  const base = getBase(name);\n  base.decode(buf.toString());\n}\nfunction getBase(nameOrCode) {\n  let base;\n  if (constants.names[nameOrCode]) {\n    base = constants.names[nameOrCode];\n  } else if (constants.codes[nameOrCode]) {\n    base = constants.codes[nameOrCode];\n  } else {\n    throw errNotSupported;\n  }\n  if (!base.isImplemented()) {\n    throw new Error('Base ' + nameOrCode + ' is not implemented yet');\n  }\n  return base;\n}","map":{"version":3,"names":["constants","require","exports","module","multibase","encode","decode","isEncoded","names","Object","freeze","keys","codes","errNotSupported","Error","nameOrCode","buf","base","getBase","codeBuf","Buffer","from","code","name","validEncode","concat","bufOrString","isBuffer","toString","substring","length","decodeObject","data","err","isImplemented"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/ipfs-api/node_modules/multibase/src/index.js"],"sourcesContent":["/**\n * Implementation of the [multibase](https://github.com/multiformats/multibase) specification.\n * @module Multibase\n */\n'use strict'\n\nconst constants = require('./constants')\n\nexports = module.exports = multibase\nexports.encode = encode\nexports.decode = decode\nexports.isEncoded = isEncoded\nexports.names = Object.freeze(Object.keys(constants.names))\nexports.codes = Object.freeze(Object.keys(constants.codes))\n\nconst errNotSupported = new Error('Unsupported encoding')\n\n/**\n * Create a new buffer with the multibase varint+code.\n *\n * @param {string|number} nameOrCode - The multibase name or code number.\n * @param {Buffer} buf - The data to be prefixed with multibase.\n * @memberof Multibase\n * @returns {Buffer}\n */\nfunction multibase (nameOrCode, buf) {\n  if (!buf) {\n    throw new Error('requires an encoded buffer')\n  }\n  const base = getBase(nameOrCode)\n  const codeBuf = Buffer.from(base.code)\n\n  const name = base.name\n  validEncode(name, buf)\n  return Buffer.concat([codeBuf, buf])\n}\n\n/**\n * Encode data with the specified base and add the multibase prefix.\n *\n * @param {string|number} nameOrCode - The multibase name or code number.\n * @param {Buffer} buf - The data to be encoded.\n * @returns {Buffer}\n * @memberof Multibase\n */\nfunction encode (nameOrCode, buf) {\n  const base = getBase(nameOrCode)\n  const name = base.name\n\n  return multibase(name, Buffer.from(base.encode(buf)))\n}\n\n/**\n *\n * Takes a buffer or string encoded with multibase header\n * decodes it and returns an object with the decoded buffer\n * and the encoded type { base: <name>, data: <buffer> }\n *\n * from @theobat : This is not what the multibase.spec.js test is waiting for,\n * hence the return decodeObject.data\n *\n * @param {Buffer|string} bufOrString\n * @returns {Object} result\n * @returns {string} result.base\n * @returns {Buffer} result.data\n * @memberof Multibase\n *\n */\nfunction decode (bufOrString) {\n  if (Buffer.isBuffer(bufOrString)) {\n    bufOrString = bufOrString.toString()\n  }\n\n  const code = bufOrString.substring(0, 1)\n  bufOrString = bufOrString.substring(1, bufOrString.length)\n\n  if (typeof bufOrString === 'string') {\n    bufOrString = Buffer.from(bufOrString)\n  }\n\n  const base = getBase(code)\n\n  const decodeObject = {\n    base: base.name,\n    data: Buffer.from(base.decode(bufOrString.toString()))\n  }\n  return decodeObject.data\n}\n\n/**\n * Is the given data multibase encoded?\n *\n * @param {Buffer|string} bufOrString\n * @returns {boolean}\n * @memberof Multibase\n */\nfunction isEncoded (bufOrString) {\n  if (Buffer.isBuffer(bufOrString)) {\n    bufOrString = bufOrString.toString()\n  }\n\n  const code = bufOrString.substring(0, 1)\n  try {\n    const base = getBase(code)\n    return base.name\n  } catch (err) {\n    return false\n  }\n}\n\n/**\n * @param {string} name\n * @param {Buffer} buf\n * @private\n * @returns {undefined}\n */\nfunction validEncode (name, buf) {\n  const base = getBase(name)\n  base.decode(buf.toString())\n}\n\nfunction getBase (nameOrCode) {\n  let base\n\n  if (constants.names[nameOrCode]) {\n    base = constants.names[nameOrCode]\n  } else if (constants.codes[nameOrCode]) {\n    base = constants.codes[nameOrCode]\n  } else {\n    throw errNotSupported\n  }\n\n  if (!base.isImplemented()) {\n    throw new Error('Base ' + nameOrCode + ' is not implemented yet')\n  }\n\n  return base\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}