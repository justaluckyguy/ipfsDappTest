{"ast":null,"code":"'use strict';\n\nconst TransformStream = require('readable-stream').Transform;\n\n/*\n  Transforms a stream of {Name, Hash} objects to include size\n  of the DAG object.\n\n  Usage: inputStream.pipe(new FileResultStreamConverter())\n\n  Input object format:\n  {\n    Name: '/path/to/file/foo.txt',\n    Hash: 'Qma4hjFTnCasJ8PVp3mZbZK5g2vGDT4LByLJ7m8ciyRFZP'\n    Size: '20'\n  }\n\n  Output object format:\n  {\n    path: '/path/to/file/foo.txt',\n    hash: 'Qma4hjFTnCasJ8PVp3mZbZK5g2vGDT4LByLJ7m8ciyRFZP',\n    size: 20\n  }\n*/\nclass FileResultStreamConverter extends TransformStream {\n  constructor(options) {\n    const opts = Object.assign({}, options || {}, {\n      objectMode: true\n    });\n    super(opts);\n  }\n  _transform(obj, enc, callback) {\n    if (!obj.Hash) {\n      return callback();\n    }\n    callback(null, {\n      path: obj.Name,\n      hash: obj.Hash,\n      size: parseInt(obj.Size, 10)\n    });\n  }\n}\nmodule.exports = FileResultStreamConverter;","map":{"version":3,"names":["TransformStream","require","Transform","FileResultStreamConverter","constructor","options","opts","Object","assign","objectMode","_transform","obj","enc","callback","Hash","path","Name","hash","size","parseInt","Size","module","exports"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/ipfs-api/src/utils/file-result-stream-converter.js"],"sourcesContent":["'use strict'\n\nconst TransformStream = require('readable-stream').Transform\n\n/*\n  Transforms a stream of {Name, Hash} objects to include size\n  of the DAG object.\n\n  Usage: inputStream.pipe(new FileResultStreamConverter())\n\n  Input object format:\n  {\n    Name: '/path/to/file/foo.txt',\n    Hash: 'Qma4hjFTnCasJ8PVp3mZbZK5g2vGDT4LByLJ7m8ciyRFZP'\n    Size: '20'\n  }\n\n  Output object format:\n  {\n    path: '/path/to/file/foo.txt',\n    hash: 'Qma4hjFTnCasJ8PVp3mZbZK5g2vGDT4LByLJ7m8ciyRFZP',\n    size: 20\n  }\n*/\nclass FileResultStreamConverter extends TransformStream {\n  constructor (options) {\n    const opts = Object.assign({}, options || {}, { objectMode: true })\n    super(opts)\n  }\n\n  _transform (obj, enc, callback) {\n    if (!obj.Hash) {\n      return callback()\n    }\n\n    callback(null, {\n      path: obj.Name,\n      hash: obj.Hash,\n      size: parseInt(obj.Size, 10)\n    })\n  }\n}\n\nmodule.exports = FileResultStreamConverter\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,eAAe,GAAGC,OAAO,CAAC,iBAAiB,CAAC,CAACC,SAAS;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,yBAAyB,SAASH,eAAe,CAAC;EACtDI,WAAW,CAAEC,OAAO,EAAE;IACpB,MAAMC,IAAI,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEH,OAAO,IAAI,CAAC,CAAC,EAAE;MAAEI,UAAU,EAAE;IAAK,CAAC,CAAC;IACnE,KAAK,CAACH,IAAI,CAAC;EACb;EAEAI,UAAU,CAAEC,GAAG,EAAEC,GAAG,EAAEC,QAAQ,EAAE;IAC9B,IAAI,CAACF,GAAG,CAACG,IAAI,EAAE;MACb,OAAOD,QAAQ,EAAE;IACnB;IAEAA,QAAQ,CAAC,IAAI,EAAE;MACbE,IAAI,EAAEJ,GAAG,CAACK,IAAI;MACdC,IAAI,EAAEN,GAAG,CAACG,IAAI;MACdI,IAAI,EAAEC,QAAQ,CAACR,GAAG,CAACS,IAAI,EAAE,EAAE;IAC7B,CAAC,CAAC;EACJ;AACF;AAEAC,MAAM,CAACC,OAAO,GAAGnB,yBAAyB"},"metadata":{},"sourceType":"script"}