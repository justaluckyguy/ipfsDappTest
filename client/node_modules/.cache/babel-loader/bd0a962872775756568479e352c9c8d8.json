{"ast":null,"code":"'use strict';\n\nconst promisify = require('promisify-es6');\nconst moduleConfig = require('./utils/module-config');\nmodule.exports = arg => {\n  const send = moduleConfig(arg);\n  return promisify((args, opts, callback) => {\n    if (typeof opts === 'function') {\n      callback = opts;\n      opts = {};\n    }\n    send({\n      path: 'ls',\n      args: args,\n      qs: opts\n    }, (err, results) => {\n      if (err) {\n        return callback(err);\n      }\n      let result = results.Objects;\n      if (!result) {\n        return callback(new Error('expected .Objects in results'));\n      }\n      result = result[0];\n      if (!result) {\n        return callback(new Error('expected one array in results.Objects'));\n      }\n      result = result.Links;\n      if (!Array.isArray(result)) {\n        return callback(new Error('expected one array in results.Objects[0].Links'));\n      }\n      result = result.map(link => ({\n        name: link.Name,\n        path: args + '/' + link.Name,\n        size: link.Size,\n        hash: link.Hash,\n        type: typeOf(link),\n        depth: link.Depth || 1\n      }));\n      callback(null, result);\n    });\n  });\n};\nfunction typeOf(link) {\n  switch (link.Type) {\n    case 1:\n    case 5:\n      return 'dir';\n    case 2:\n      return 'file';\n    default:\n      return 'unknown';\n  }\n}","map":{"version":3,"names":["promisify","require","moduleConfig","module","exports","arg","send","args","opts","callback","path","qs","err","results","result","Objects","Error","Links","Array","isArray","map","link","name","Name","size","Size","hash","Hash","type","typeOf","depth","Depth","Type"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/ipfs-api/src/ls.js"],"sourcesContent":["'use strict'\n\nconst promisify = require('promisify-es6')\nconst moduleConfig = require('./utils/module-config')\n\nmodule.exports = (arg) => {\n  const send = moduleConfig(arg)\n\n  return promisify((args, opts, callback) => {\n    if (typeof (opts) === 'function') {\n      callback = opts\n      opts = {}\n    }\n    send({\n      path: 'ls',\n      args: args,\n      qs: opts\n    }, (err, results) => {\n      if (err) {\n        return callback(err)\n      }\n\n      let result = results.Objects\n      if (!result) {\n        return callback(new Error('expected .Objects in results'))\n      }\n\n      result = result[0]\n      if (!result) {\n        return callback(new Error('expected one array in results.Objects'))\n      }\n\n      result = result.Links\n      if (!Array.isArray(result)) {\n        return callback(new Error('expected one array in results.Objects[0].Links'))\n      }\n\n      result = result.map((link) => ({\n        name: link.Name,\n        path: args + '/' + link.Name,\n        size: link.Size,\n        hash: link.Hash,\n        type: typeOf(link),\n        depth: link.Depth || 1\n      }))\n\n      callback(null, result)\n    })\n  })\n}\n\nfunction typeOf (link) {\n  switch (link.Type) {\n    case 1:\n    case 5:\n      return 'dir'\n    case 2:\n      return 'file'\n    default:\n      return 'unknown'\n  }\n}\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,SAAS,GAAGC,OAAO,CAAC,eAAe,CAAC;AAC1C,MAAMC,YAAY,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAErDE,MAAM,CAACC,OAAO,GAAIC,GAAG,IAAK;EACxB,MAAMC,IAAI,GAAGJ,YAAY,CAACG,GAAG,CAAC;EAE9B,OAAOL,SAAS,CAAC,CAACO,IAAI,EAAEC,IAAI,EAAEC,QAAQ,KAAK;IACzC,IAAI,OAAQD,IAAK,KAAK,UAAU,EAAE;MAChCC,QAAQ,GAAGD,IAAI;MACfA,IAAI,GAAG,CAAC,CAAC;IACX;IACAF,IAAI,CAAC;MACHI,IAAI,EAAE,IAAI;MACVH,IAAI,EAAEA,IAAI;MACVI,EAAE,EAAEH;IACN,CAAC,EAAE,CAACI,GAAG,EAAEC,OAAO,KAAK;MACnB,IAAID,GAAG,EAAE;QACP,OAAOH,QAAQ,CAACG,GAAG,CAAC;MACtB;MAEA,IAAIE,MAAM,GAAGD,OAAO,CAACE,OAAO;MAC5B,IAAI,CAACD,MAAM,EAAE;QACX,OAAOL,QAAQ,CAAC,IAAIO,KAAK,CAAC,8BAA8B,CAAC,CAAC;MAC5D;MAEAF,MAAM,GAAGA,MAAM,CAAC,CAAC,CAAC;MAClB,IAAI,CAACA,MAAM,EAAE;QACX,OAAOL,QAAQ,CAAC,IAAIO,KAAK,CAAC,uCAAuC,CAAC,CAAC;MACrE;MAEAF,MAAM,GAAGA,MAAM,CAACG,KAAK;MACrB,IAAI,CAACC,KAAK,CAACC,OAAO,CAACL,MAAM,CAAC,EAAE;QAC1B,OAAOL,QAAQ,CAAC,IAAIO,KAAK,CAAC,gDAAgD,CAAC,CAAC;MAC9E;MAEAF,MAAM,GAAGA,MAAM,CAACM,GAAG,CAAEC,IAAI,KAAM;QAC7BC,IAAI,EAAED,IAAI,CAACE,IAAI;QACfb,IAAI,EAAEH,IAAI,GAAG,GAAG,GAAGc,IAAI,CAACE,IAAI;QAC5BC,IAAI,EAAEH,IAAI,CAACI,IAAI;QACfC,IAAI,EAAEL,IAAI,CAACM,IAAI;QACfC,IAAI,EAAEC,MAAM,CAACR,IAAI,CAAC;QAClBS,KAAK,EAAET,IAAI,CAACU,KAAK,IAAI;MACvB,CAAC,CAAC,CAAC;MAEHtB,QAAQ,CAAC,IAAI,EAAEK,MAAM,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC;AAED,SAASe,MAAM,CAAER,IAAI,EAAE;EACrB,QAAQA,IAAI,CAACW,IAAI;IACf,KAAK,CAAC;IACN,KAAK,CAAC;MACJ,OAAO,KAAK;IACd,KAAK,CAAC;MACJ,OAAO,MAAM;IACf;MACE,OAAO,SAAS;EAAA;AAEtB"},"metadata":{},"sourceType":"script"}