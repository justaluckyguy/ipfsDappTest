{"ast":null,"code":"'use strict';\n\nconst dagNodeUtil = require('./util');\nconst cloneLinks = dagNodeUtil.cloneLinks;\nconst cloneData = dagNodeUtil.cloneData;\nconst create = require('./create');\nfunction rmLink(dagNode, nameOrMultihash, callback) {\n  const data = cloneData(dagNode);\n  let links = cloneLinks(dagNode);\n  if (typeof nameOrMultihash === 'string') {\n    links = links.filter(link => link.name !== nameOrMultihash);\n  } else if (Buffer.isBuffer(nameOrMultihash)) {\n    links = links.filter(link => !link.multihash.equals(nameOrMultihash));\n  } else {\n    return callback(new Error('second arg needs to be a name or multihash'), null);\n  }\n  create(data, links, callback);\n}\nmodule.exports = rmLink;","map":{"version":3,"names":["dagNodeUtil","require","cloneLinks","cloneData","create","rmLink","dagNode","nameOrMultihash","callback","data","links","filter","link","name","Buffer","isBuffer","multihash","equals","Error","module","exports"],"sources":["/home/isaak/Workspace/ipfsDapp/client/node_modules/ipld-dag-pb/src/dag-node/rmLink.js"],"sourcesContent":["'use strict'\n\nconst dagNodeUtil = require('./util')\nconst cloneLinks = dagNodeUtil.cloneLinks\nconst cloneData = dagNodeUtil.cloneData\nconst create = require('./create')\n\nfunction rmLink (dagNode, nameOrMultihash, callback) {\n  const data = cloneData(dagNode)\n  let links = cloneLinks(dagNode)\n\n  if (typeof nameOrMultihash === 'string') {\n    links = links.filter((link) => link.name !== nameOrMultihash)\n  } else if (Buffer.isBuffer(nameOrMultihash)) {\n    links = links.filter((link) => !link.multihash.equals(nameOrMultihash))\n  } else {\n    return callback(new Error('second arg needs to be a name or multihash'), null)\n  }\n\n  create(data, links, callback)\n}\n\nmodule.exports = rmLink\n"],"mappings":"AAAA,YAAY;;AAEZ,MAAMA,WAAW,GAAGC,OAAO,CAAC,QAAQ,CAAC;AACrC,MAAMC,UAAU,GAAGF,WAAW,CAACE,UAAU;AACzC,MAAMC,SAAS,GAAGH,WAAW,CAACG,SAAS;AACvC,MAAMC,MAAM,GAAGH,OAAO,CAAC,UAAU,CAAC;AAElC,SAASI,MAAM,CAAEC,OAAO,EAAEC,eAAe,EAAEC,QAAQ,EAAE;EACnD,MAAMC,IAAI,GAAGN,SAAS,CAACG,OAAO,CAAC;EAC/B,IAAII,KAAK,GAAGR,UAAU,CAACI,OAAO,CAAC;EAE/B,IAAI,OAAOC,eAAe,KAAK,QAAQ,EAAE;IACvCG,KAAK,GAAGA,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,IAAI,KAAKN,eAAe,CAAC;EAC/D,CAAC,MAAM,IAAIO,MAAM,CAACC,QAAQ,CAACR,eAAe,CAAC,EAAE;IAC3CG,KAAK,GAAGA,KAAK,CAACC,MAAM,CAAEC,IAAI,IAAK,CAACA,IAAI,CAACI,SAAS,CAACC,MAAM,CAACV,eAAe,CAAC,CAAC;EACzE,CAAC,MAAM;IACL,OAAOC,QAAQ,CAAC,IAAIU,KAAK,CAAC,4CAA4C,CAAC,EAAE,IAAI,CAAC;EAChF;EAEAd,MAAM,CAACK,IAAI,EAAEC,KAAK,EAAEF,QAAQ,CAAC;AAC/B;AAEAW,MAAM,CAACC,OAAO,GAAGf,MAAM"},"metadata":{},"sourceType":"script"}